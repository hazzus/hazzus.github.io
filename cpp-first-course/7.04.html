<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C++ 7 april</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="templates">Templates</h1>
<p>Коронная фича, которая изменила вообще процесс написания кода.<br>
<strong>What for and why</strong><br>
Очень тесно разрабатывалась c библиотекой контейнеров. Но потом нашло широкое применение.<br>
Основной вопрос, который стоял перед разработчиками - необходимость поддерживать любой тип, например, в массиве изменяемой длины.<br>
Для реализации было несколько вариантов:</p>
<ul>
<li><code>void*</code> - указатель на тип любого размера?</li>
<li>хранить длину типа (писать правильные методы и все такое)</li>
<li>автоматически генерить код для нового типа контейнеров(мб с помощью препроцессинга):</li>
</ul>
<pre class=" language-c"><code class="prism  language-c"><span class="token macro property">#<span class="token directive keyword">define</span> DECLARE_VECTOR(type)</span>
<span class="token keyword">struct</span> vector_##type <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
<p>1 подход + :</p>
<ul>
<li>быстрее время компиляции(в активном использовании)</li>
<li>меньше объекты(smaller object files)</li>
<li>debugger работает</li>
</ul>
<p>2 подход +:</p>
<ul>
<li>type _safe</li>
<li>более эффективная реализация</li>
</ul>
<h2 id="vector-with-templates">vector with templates</h2>
<pre class=" language-c"><code class="prism ++ language-c">template <span class="token operator">&lt;</span>typename T<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> vector <span class="token punctuation">{</span>
	T<span class="token operator">*</span> delta<span class="token punctuation">;</span>
	size_t size<span class="token punctuation">;</span>
	size_t capcity<span class="token punctuation">;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Как это работает:</strong><br>
Когда мы берем <code>vector&lt;int&gt;</code> он берет шаблон, подставляет в <code>T</code> <code>int</code><br>
<strong>Плюсы:</strong></p>
<ul>
<li>debugger works</li>
<li>more efficient</li>
<li>type _ safe</li>
</ul>
<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>
</div>
</body>

</html>
