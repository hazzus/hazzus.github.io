<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="java-aka-korneev-triki-boy">10 java (aka Korneev triki boy)</h1>
<p>Another Triki Boi</p>
<blockquote>
<p>Последняя домашка, которая решит конфликт на пикче</p>
</blockquote>
<p><img src="https://pp.userapi.com/c834104/v834104303/5ed31/xq8jKuFqNqo.jpg" alt=""></p>
<h3 id="данная-заметка-даже-не-претендует-на-то-чтобы-быть-правильной-и-пишется-за-день-до-сдачи.">Данная заметка даже не претендует на то, чтобы быть правильной и пишется за день до сдачи.</h3>
<blockquote>
<p>У нас нет никаких конкретных требований от Гоши, поэтому лучше руководствоваться абсолютным принципом: “Качай все, что можешь, а что не можешь - не качай”</p>
</blockquote>
<p><img src="https://cs5.pikabu.ru/images/big_size_comm/2015-03_2/14256350388227.jpg" alt=""></p>
<ol>
<li>Прошлая домашка споткнулась об ДФС, если вы у Корнеева - <strong>Очень Жаль.</strong> БФC конечно легко делается созданием HashMap на посещение. Почему HashMap - потому что важно помнить что вам в исходнике нужно поменять на новую ссылку.</li>
<li>Самое важное – понять как лучше всего хранить в данном случае сайты. Если ты неглуп и знаешь как устроен интернет. То сразу поймешь, что велосипед придумывать ни к чему… Если ты еще не понял, то попробуй прочитать про <a href="https://ru.wikipedia.org/wiki/DNS">протокол DNS</a>. Если будешь хранить ссылку в классе <a href="https://docs.oracle.com/javase/8/docs/api/java/net/URL.html">URL</a>, то можешь воспользоваться <code>.getHost() и .getPath().</code> Вообще, здесь не столь важно разбивать host часть URL, поэтому первую папку проще сделать всей host частью.</li>
<li>Ты попробуешь использовать что то из предыдущей домашки, и частично будешь прав, но тебе лучше <strong>забыть</strong> про Корнеевские классы Image и Page, потому что в этой домашке столько полей смысла <strong>не имеют</strong>. Что ты можешь использовать из написанного это общий принцип обхода страниц, твой <strong>парсер тегов</strong>(как бы он не был написан)</li>
<li>Логично было бы переписать классы <strong>Image и Page</strong> под твои нужды. Например в них ты можешь хранить код странички, в котором придется редактировать ссылки на страницы или картинки. Так же удобно хранить путь до файла, ссылку в формате URL. Page тогда может быть как HTML, так и CSS c JS.</li>
<li>Для удобства в тех же классах (лично я) прописал бы функцию, которая закачивает код, и которая его сохраняет. Неплохо бы их разделить, потому что прежде чем код записать его надо отрекдактировать.</li>
<li>Для создания и записи используй <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html"><em>File</em></a> <em>или</em> <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html"><em>Files</em></a><em>,</em> не стоит забывать проверять существование директории и самого файла, прежде чем его записывать. (тебе помогут <code>.exists() и .mkdirs()</code>)</li>
<li>В данной домашке особенно важно ловить ВСЕ <code>Exception</code>(ты же не хомячок и делаешь нормальное приложение). Это важно понимать, потому что HTML придумывали <s>пид…</s> очень умные люди. Поэтому если что то в нем написано неправильно, чего то не существует или еще что либо, то это все хорошо “скомпилится” и вообще будет <em>прекрасно себя чувствовать</em>. Поэтому важно ловить 404, 403, и <strong>всевозможные</strong> ошибки.</li>
<li>Чтобы не ловить 403 почти на всех адекватных сайтах с защитой от ботов(google или даже Кинопоиск). Используйте не <code>URL.openStream()</code> а <a href="https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection"><strong>более хитрую схему</strong></a> (это опционально, наверное) Лично я воспользовался последним комментарием.</li>
<li>Как и в прошлой дз лучше не наступать на грабли дважды, не стоит заново скачивать картинки, стили и скрипты, которые ты уже качал. Здесь лучше завести <a href="https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html">HashMap</a>’ы того, что ты уже посетил из картинок и страниц. Конечно, кроме ссылок, так как обход на заданную глубину должен продолжаться в любом случае.</li>
<li>Для обработки и разрешения ссылок есть прекрасный <a href="https://docs.oracle.com/javase/8/docs/api/java/net/URI.html"><code>URI.resolve()</code></a></li>
<li>в  могут быть не только стили, но и иконки, и ссылки, и … Это можно выкачать оттуда как картинки. А если там <em>mailto:, skype, phone:,</em> то смотри пункт 7</li>
<li>В теге &lt;script&gt; может не быть src (а такие скрипты тоже по хорошему надо выкачивать), следите за закрывающим тегом пока парсите (не знаю насколько это вообще обязательный пункт)</li>
<li>Вот этот пункт может вызвать повышение средней температуры в вашей комнате, но внутри CSS тоже можно подключать картинки)) Если вы садомазохист(как я), парсите css(это очень просто, ищите <code>url(...)</code> ) Кстати, сайт Корнеева без этого <em>правильно</em> <strong>не отобразится.</strong></li>
<li>Ах, да, если вы не хотите очень долго проигрывать, просто заменяйте все ссылки на абсолютные в директории своего компа, для этого вам поможешь File.getAbsolutePath()</li>
<li>Ну и конечно же, за отсутствием тестов, дебажьте на всем, что сможете придумать ( только комп себе не взорвите)</li>
</ol>
<blockquote>
<p>Наверное, это все советы, которые я могу дать, на этом мои полномочия, как говорится, всё</p>
</blockquote>
<p><img src="https://pp.userapi.com/c841025/v841025209/39d0d/XZCd9dfNYrs.jpg" alt=""></p>
<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>
</div>
</body>

</html>
